
### What is a UUID?

**UUID** stands for **Universally Unique Identifier**. Itâ€™s a 128-bit value represented as a hexadecimal string in the format `8-4-4-4-12`, which makes UUIDs globally unique, ensuring that identifiers do not collide across different systems or databases. 

### How is UUID Generated (UUID Version 4)?

- **UUID Version 4 (UUIDv4)**: This version of UUID is generated randomly. It is composed of randomly generated values but follows specific formatting guidelines to conform to UUID standards. The randomness makes it extremely unlikely for two UUIDv4 identifiers to be the same.

In PostgreSQL, using `uuid_generate_v4()` from the `uuid-ossp` extension will create a UUIDv4 value for each row as it's inserted. This is particularly useful for generating unique IDs without needing a centralized sequence or coordination with other databases.
---

### Database and Extension Setup

```sql
CREATE DATABASE users_db;
```
- Creates a new database called `users_db`.

```sql
\c users_db
```
- Connects to the `users_db` database.

```sql
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
```
- Enables the `uuid-ossp` extension in PostgreSQL, which provides functions to generate UUIDs, including UUID version 1 and version 4.
- `uuid-ossp` needs to be enabled to use the `uuid_generate_v4()` function for UUID generation.

```sql
\dx
```
- Lists all extensions currently installed in the database, including `uuid-ossp`.

---

### Table Creation

```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email VARCHAR(100) NOT NULL,
    username VARCHAR(50) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

- **`id UUID PRIMARY KEY DEFAULT uuid_generate_v4()`**: 
  - Defines `id` as the primary key for the `users` table.
  - The `UUID` data type represents universally unique identifiers, which are 128-bit values unique across time and space.
  - `DEFAULT uuid_generate_v4()` sets the default value to be a UUID generated by `uuid_generate_v4()` each time a new record is inserted.
  
- **`email VARCHAR(100) NOT NULL`**:
  - Defines `email` as a `VARCHAR` field with a maximum length of 100 characters.
  - The `NOT NULL` constraint ensures that every user must have an email.

- **`username VARCHAR(50) NOT NULL UNIQUE`**:
  - Defines `username` as a `VARCHAR` field with a maximum length of 50 characters.
  - `NOT NULL` ensures each user has a username.
  - `UNIQUE` enforces that no two users can have the same username.

- **`created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP`**:
  - `created_at` is a timestamp field that defaults to the current time when the row is created, allowing for record tracking by creation time.

---

### Inserting Data

```sql
INSERT INTO users (username, email)
VALUES
    ('alice', 'alice@example.com'),
    ('bob', 'bob@example.com');
```
- Inserts two users, `alice` and `bob`, with their emails into the `users` table.
- Each entry will automatically generate a UUID for `id` using `uuid_generate_v4()`, and the `created_at` field will be set to the current timestamp.

---

### Selecting Data

```sql
SELECT * FROM users;
```
- Retrieves all rows and columns from the `users` table.

---
